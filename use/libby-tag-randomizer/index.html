<html>
    <head>
        <meta charset="utf-8" />
        <style>
            body {
                margin: 0;
                background: black;
            }
            main {
                margin: 10px auto;
                width: 666px;
                max-width: 90vw;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            iframe {
                width: 100vw;
                height: 75vh;
                border: none;
                margin: 0;
            }
            h1 {
                color: white;
            }
            button {
                font-size: 2rem;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <main>
            <h1>Step 1: Pick a tag in your Libby account</h1>
            <iframe src="https://libbyapp.com/tags"></iframe>
            <h1>Step 2: Click this button:</h1>
            <button id="go">Give me a random book</button>
        </main>
        <script>
            const iframe = document.querySelector("iframe");
            const button = document.querySelector("#go");
            button.addEventListener("click", () => {
                const titles =
                    iframe.contentDocument.body.querySelectorAll(
                        ".title-plank"
                    );
                const title = titles[Math.floor(Math.random() * titles.length)];
                const link = title.querySelector(".title-plank-action");
                window.href.location =
                    "https://libbyapp.com" + link.getAttribute("href");
            });
        </script>
    </body>
</html>
